<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <link rel="shortcut icon" type="image/x-icon" href="favicon.png" />
        <title>Quick Tip: Use jQuery to Complete an Arbitrary Number of AJAX Calls Before Firing an Event &middot; Monica</title>
        <meta name="description" content="Somewhat recently, I encountered an issue where my expected user input is an arbitrarily long list of words. While I could get the word count, I had no reliable way to know whether all of the ajax requests had been completed before firing an event that created a list of definitions for each word. I had several realizations in my quest:
 I could do the entire process synchronously. However, this meant that one bad ajax return or error could cause the entire process to hang.">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@https://twitter.com/monicalent" />
        <meta name="twitter:creator" content="@https://twitter.com/monicalent" />
        <meta name="twitter:title" content="Quick Tip: Use jQuery to Complete an Arbitrary Number of AJAX Calls Before Firing an Event" />
        <meta name="twitter:description" content="" />
        <meta name="twitter:url" content="http://monicalent.com/blog/2013/06/28/quick-tip-use-jquery-to-complete-an-arbitrary-number-of-ajax-calls-before-firing-an-event/" />
        <meta name="twitter:image" content="http://monicalent.com/assets/images/image01.jpg">
        <meta name="generator" content="Hugo 0.30.2" />
        <meta name="robots" content="index,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <link rel="stylesheet" href="http://monicalent.com/blog/dist/styles.css">
        <link rel="stylesheet" href="http://monicalent.com/blog/dist/prism.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        
        
    </head>
    <body>
        
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-40399378-2', 'auto');
ga('send', 'pageview');
</script>


        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                        
                            <h1 class="site-title">
                                <a title="Blog" href="http://monicalent.com/blog/">Blog</a>
                            </h1>
                        
                        <a class="button-square" href="http://monicalent.com/blog/index.xml"><i class="fa fa-rss"></i></a>
                        
                            <a class="button-square button-social hint--top" data-hint="Twitter" title="Twitter" href="https://twitter.com/monicalent">
                                <i class="fa fa-twitter"></i>
                            </a>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Github" title="Github" href="https://github.com/mlent">
                                <i class="fa fa-github-alt"></i>
                            </a>
                        
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Google+" title="Google+" href="https://google.com/&#43;MonicaLent">
                                <i class="fa fa-google-plus"></i>
                            </a>
                        
                        
                    </div>

                    <ul class="site-nav">
                        
    <li class="site-nav-item">
        <a title="Blog" href="/blog/">Blog</a>
    </li>

    <li class="site-nav-item">
        <a title="Website" href="http://monicalent.com/">Website</a>
    </li>

    <li class="site-nav-item">
        <a title="About" href="http://monicalent.com/#about">About</a>
    </li>

                    </ul>
                </div>
            </header>

            <div id="container">


<div class="container">
    <article class="post-container" itemscope="" itemtype="http://schema.org/BlogPosting">
        <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Quick Tip: Use jQuery to Complete an Arbitrary Number of AJAX Calls Before Firing an Event</h1>
    
    <p class="post-date">
        <span>Published <time datetime="2013-06-28" itemprop="datePublished">Fri, Jun 28, 2013</time></span>
        <span>by</span>
        <span itemscope="" itemprop="author" itemtype="https://schema.org/Person">
            <span itemprop="name">
                <a href="http://monicalent.com" itemprop="url" rel="author">Monica</a>
            </span>
        </span>
    </p>
</header>

<div>
  <center class="share" style="float: none; margin-bottom: 20px">
    <span>Share this post:</span>
    <a class="icon-twitter" href="http://twitter.com/share?text=How%20to%20manage%20or%20eliminate%20%23React%20state%20without%20%23Redux%20by%20%40monicalent&url=http%3a%2f%2fmonicalent.com%2fblog%2f2017%2f07%2f23%2fmanage-state-in-react%2f"
                            onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <i class="fa fa-twitter"></i>
      <span class="hidden">Twitter</span>
    </a>

    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fmonicalent.com%2fblog%2f2017%2f07%2f23%2fmanage-state-in-react%2f"
                             onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <i class="fa fa-facebook"></i>
      <span class="hidden">Facebook</span>
    </a>

    <a class="icon-google-plus" href="https://plus.google.com/share?url=http%3a%2f%2fmonicalent.com%2fblog%2f2017%2f07%2f23%2fmanage-state-in-react%2f"
                                onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <i class="fa fa-google-plus"></i>
      <span class="hidden">Google+</span>
    </a>
  </center>
</div>


        <div class="post-content clearfix" itemprop="articleBody">
    

    

<p>Somewhat recently, I encountered an issue where my expected user input is an arbitrarily long list of words. While I could get the word count, I had no reliable way to know whether all of the ajax requests had been completed before firing an event that created a list of definitions for each word. I had several realizations in my quest:</p>

<ol>
<li><p>I could do the entire process synchronously. However, this meant that one bad ajax return or error could cause the entire process to hang. It also meant that slow and intensive requests would cause the application to perform especially poorly as well.</p></li>

<li><p>Doing a simple for-loop of ajax requests would definitely not work, because the entire control structure would be done evaluating before even the first request completed.</p></li>

<li><p>I couldn&rsquo;t keep an internal counter, because the data returned by ajax&rsquo;s success method basically gets eaten by the larger ajax object, which returns a deferred object. I had no way of passing an integer into the ajax object and then getting it back out.</p></li>

<li><p>Since I wanted to do this asynchronously, I also couldn&rsquo;t guarantee which ajax request would complete last, even if it was at the end of my list of requests to fire.</p></li>
</ol>

<p>Here is a simple way to address this problem, using jQuery.</p>

<p>Inside the ajax call here, deal with the success and errors states for each call.
Refer to <a href="http://api.jquery.com/jQuery.ajax/" target="_blank">jQuery&rsquo;s documentation on $.ajax</a> if unfamiliar with it.</p>

<pre><code>var ajax_caller = function(data) {
    return $.ajax({
        url: data.url, 
        method: data.method
    });
};
</code></pre>

<p>Create an array of <a href="http://api.jquery.com/category/deferred-object/" target="_blank" title="jQuery Documentation for Deferred Objects">deferred objects</a></p>

<pre><code>var ajax_calls = [];
for (var i = 0; i &lt; arbitrary_number; i++)
    ajax_calls.push(ajax_caller({
        url: '/api/endpoint/' + i,
        method: 'GET'
    }));
</code></pre>

<p><a href="http://api.jquery.com/jQuery.when/" target="_blank" title="jQuery Documentation for $.when">$.when</a> takes a comma separated list of deferred objects.</p>

<pre><code>// Apply unpacks array into a suitable list for $.when to handle.
$.when.apply(this, ajax_calls).done(function() {
    // Event to be fired after all ajax calls complete
});
</code></pre>

<hr />

<h2 id="questions-comments-corrections">Questions, Comments, Corrections?</h2>

<p>Get in touch via Twitter at <a href="http://www.twitter.com/monicalent">@monicalent</a>.</p>

</div>

        <footer class="post-footer clearfix">
    

<div class="share">
    <span>Share this post:</span>
    
        <a class="icon-twitter" href="https://twitter.com/share?text=Quick%20Tip%3a%20Use%20jQuery%20to%20Complete%20an%20Arbitrary%20Number%20of%20AJAX%20Calls%20Before%20Firing%20an%20Event&url=http%3a%2f%2fmonicalent.com%2fblog%2f2013%2f06%2f28%2fquick-tip-use-jquery-to-complete-an-arbitrary-number-of-ajax-calls-before-firing-an-event%2f"
            onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
            <i class="fa fa-twitter"></i>
            <span class="hidden">Twitter</span>
        </a>
    

    
        <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fmonicalent.com%2fblog%2f2013%2f06%2f28%2fquick-tip-use-jquery-to-complete-an-arbitrary-number-of-ajax-calls-before-firing-an-event%2f"
            onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
            <i class="fa fa-facebook"></i>
            <span class="hidden">Facebook</span>
        </a>
    

    
        <a class="icon-google-plus" href="https://plus.google.com/share?url=http%3a%2f%2fmonicalent.com%2fblog%2f2013%2f06%2f28%2fquick-tip-use-jquery-to-complete-an-arbitrary-number-of-ajax-calls-before-firing-an-event%2f"
          onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
          <i class="fa fa-google-plus"></i>
            <span class="hidden">Google+</span>
        </a>
    
    
</div>


</footer>


        
    </article>
</div>

            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="site-title-wrapper">
                    <h1 class="site-title">
                        <a title="Blog" href="http://monicalent.com/blog/">Blog</a>
                    </h1>
                    <a class="button-square button-jump-top js-jump-top" href="#">
                        <i class="fa fa-angle-up"></i>
                    </a>
                </div>

                <p class="footer-copyright">
                    <span>&copy; 2017 / Powered by <a href="https://gohugo.io/">Hugo</a></span>
                </p>
                <p class="footer-copyright">
                    <span><a href="https://github.com/roryg/ghostwriter">Ghostwriter theme</a> By <a href="http://jollygoodthemes.com">JollyGoodThemes</a></span>
                    <span>/ <a href="https://github.com/jbub/ghostwriter">Ported</a> to Hugo By <a href="https://github.com/jbub">jbub</a></span>
                </p>
            </div>
        </footer>

        <script src="http://monicalent.com/blog/js/jquery-1.11.3.min.js"></script>
        <script src="http://monicalent.com/blog/js/jquery.fitvids.js"></script>
        <script src="http://monicalent.com/blog/js/prism.js"></script>
        <script src="http://monicalent.com/blog/js/scripts.js"></script>
    </body>
</html>

